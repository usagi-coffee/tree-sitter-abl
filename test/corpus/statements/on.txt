================================================================================
ON
================================================================================

ON WRITE OF Customer NEW new-cust OLD old-cust DO:
  a += 3.
END.

ON ASSIGN OF Customer.Name OLD VALUE old-name REVERT.
ON FIND OF Customer OVERRIDE REVERT.
ON CHOOSE ANYWHERE DO:
  MESSAGE "x".
END.
ON CHOOSE OF btn PERSISTENT RUN onChoose (INPUT 1).

--------------------------------------------------------------------------------

(source_code
  (on_statement
    object: (identifier)
    (referencing_phrase
      new_record: (identifier)
      old_record: (identifier))
    (do_block
      (body
        (assignment_statement
          left: (identifier)
          operator: (assignment_operator)
          right: (number_literal)))))
  (on_statement
    object: (qualified_name
      left: (identifier)
      right: (identifier))
    (referencing_phrase
      old_field: (identifier)))
  (on_statement
    object: (identifier)
    (override))
  (on_statement
    event: (identifier)
    (do_block
      (body
        (message_statement
          (string_literal)))))
  (on_statement
    event: (identifier)
    widget: (widget_phrase
      handle: (identifier))
    procedure: (identifier)
    (arguments
      (argument
        name: (number_literal)))))

================================================================================
ON - Reference snippets
================================================================================

ON WRITE OF Customer NEW new-cust OLD old-cust DO:
  IF new-cust.City <> old-cust.City AND
     new-cust.PostalCode = old-cust.PostalCode THEN DO:
    MESSAGE "Must update postal code, too.".
    RETURN ERROR.
  END.
END.
FOR EACH Customer:
  UPDATE Customer.
END.

DEFINE BUTTON b_next LABEL "Next".
DEFINE BUTTON b_prev LABEL "Previous".
DEFINE BUTTON b_quit LABEL "Quit".
DEFINE FRAME butt-frame b_next b_prev WITH CENTERED ROW SCREEN-LINES - 1.
DEFINE FRAME info
  Customer.CustNum Customer.Name
  b_quit AT ROW-OF Customer.CustNum + 2 COLUMN-OF Customer.CustNum + 18
  WITH CENTERED TITLE "Customers" ROW 2 1 COL.
ON CHOOSE OF b_next, b_prev DO:
  IF SELF:LABEL = "Next" THEN
    FIND NEXT Customer NO-LOCK.
  ELSE
    FIND PREV Customer NO-LOCK.
  DISPLAY Customer.CustNum Customer.Name WITH FRAME info.
END.
ENABLE b_next b_prev WITH FRAME butt-frame.
ENABLE b_quit WITH FRAME info.
WAIT-FOR END-ERROR OF FRAME butt-frame OR
  CHOOSE OF b_quit IN FRAME info FOCUS b_next IN FRAME butt-frame.

ON F1 GO.
ON F2 HELP.
ON CTRL-X BELL.
ON F5 ENDKEY.

--------------------------------------------------------------------------------

(source_code
  (on_statement
    object: (identifier)
    (referencing_phrase
      new_record: (identifier)
      old_record: (identifier))
    (do_block
      (body
        (if_statement
          (binary_expression
            (binary_expression
              (qualified_name
                left: (identifier)
                right: (identifier))
              (qualified_name
                left: (identifier)
                right: (identifier)))
            (binary_expression
              (qualified_name
                left: (identifier)
                right: (identifier))
              (qualified_name
                left: (identifier)
                right: (identifier))))
          then: (do_block
            (body
              (message_statement
                (string_literal))
              (return_statement)))))))
  (for_statement
    (record
      table: (identifier))
    (body
      (update_statement
        (field
          field: (identifier)))))
  (button_definition
    name: (identifier)
    (button_option
      label: (string_literal)))
  (button_definition
    name: (identifier)
    (button_option
      label: (string_literal)))
  (button_definition
    name: (identifier)
    (button_option
      label: (string_literal)))
  (frame_definition
    name: (identifier)
    field: (identifier)
    field: (identifier)
    (frame_phrase
      (centered)
      row: (binary_expression
        (identifier)
        (number_literal))))
  (frame_definition
    name: (identifier)
    field: (qualified_name
      left: (identifier)
      right: (identifier))
    field: (qualified_name
      left: (identifier)
      right: (identifier))
    field: (identifier)
    (at_phrase
      row_of: (binary_expression
        (qualified_name
          left: (identifier)
          right: (identifier))
        (number_literal))
      column_of: (binary_expression
        (qualified_name
          left: (identifier)
          right: (identifier))
        (number_literal)))
    (frame_phrase
      (centered)
      title: (string_literal)
      row: (number_literal)
      column: (number_literal)))
  (on_statement
    event: (identifier)
    widget: (widget_phrase
      handle: (identifier))
    widget: (widget_phrase
      handle: (identifier))
    (do_block
      (body
        (if_statement
          (binary_expression
            (object_access
              left: (identifier)
              right: (identifier))
            (string_literal))
          then: (find_statement
            table: (identifier)
            (no_lock))
          else: (find_statement
            table: (identifier)
            (no_lock)))
        (display_statement
          (field
            field: (qualified_name
              left: (identifier)
              right: (identifier)))
          (field
            field: (qualified_name
              left: (identifier)
              right: (identifier)))
          (frame_phrase
            frame: (identifier))))))
  (enable_statement
    (enable_item
      field: (identifier))
    (enable_item
      field: (identifier))
    (frame_phrase
      frame: (identifier)))
  (enable_statement
    (enable_item
      field: (identifier))
    (frame_phrase
      frame: (identifier)))
  (wait_for_statement
    events: (identifier)
    widgets: (widget_phrase
      frame: (identifier))
    events: (identifier)
    widgets: (widget_phrase
      field: (identifier)
      frame: (identifier))
    widgets: (widget_phrase
      system_handle: (system_handle))
    widgets: (widget_phrase
      field: (identifier)
      frame: (identifier)))
  (on_statement
    event: (identifier)
    (expression_statement
      (identifier)))
  (on_statement
    event: (identifier)
    (expression_statement
      (identifier)))
  (on_statement
    event: (identifier)
    (bell_statement))
  (on_statement
    event: (identifier)
    (expression_statement
      (identifier))))
