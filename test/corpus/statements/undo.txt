================================================================================
UNDO
================================================================================

UNDO, THROW errObj.
UNDO, LEAVE.
UNDO, RETRY.
UNDO, RETURN "done".
UNDO, RETURN ERROR "bad".
UNDO, RETURN NO-APPLY.
UNDO.

--------------------------------------------------------------------------------

(source_code
  (undo_statement
    value: (identifier))
  (undo_statement)
  (undo_statement)
  (undo_statement
    return_value: (string_literal))
  (undo_statement
    error_value: (string_literal))
  (undo_statement)
  (undo_statement))

================================================================================
UNDO - reference snippet and variants
================================================================================

FIND Customer 1000 NO-ERROR.
IF ERROR-STATUS:ERROR THEN
UNDO, THROW NEW Progress.Lang.AppError("Can't find this customer", 550).
MESSAGE Customer.CustNum.
CATCH eAppError AS Progress.Lang.AppError:
MESSAGE eAppError:GetMessage(1) eAppError:GetMessageNum(1).
END CATCH.

main: REPEAT:
DO TRANSACTION:
UNDO, NEXT main.
END.
END.

UNDO, LEAVE main.
UNDO, RETURN ERROR errObj.

--------------------------------------------------------------------------------

(source_code
  (find_statement
    (identifier)
    (number_literal)
    (no_error))
  (if_statement
    (object_access
      (identifier)
      (identifier))
    (undo_statement
      (new_expression
        (qualified_name
          (identifier)
          (identifier)
          (identifier))
        (arguments
          (argument
            (string_literal))
          (argument
            (number_literal))))))
  (message_statement
    (qualified_name
      (identifier)
      (identifier)))
  (catch_statement
    (identifier)
    (qualified_name
      (identifier)
      (identifier)
      (identifier))
    (body
      (message_statement
        (function_call
          (object_access
            (identifier)
            (identifier))
          (arguments
            (argument
              (number_literal))))
        (function_call
          (object_access
            (identifier)
            (identifier))
          (arguments
            (argument
              (number_literal)))))))
  (repeat_statement
    (identifier)
    (body
      (do_block
        (body
          (undo_statement
            (identifier))))))
  (undo_statement
    (identifier))
  (undo_statement
    (identifier)))
