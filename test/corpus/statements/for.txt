================================================================================
FOR EACH basic
================================================================================

FOR EACH Customer:
  DISPLAY Customer.Name.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)))
    (body
      (display_statement
        (qualified_name
          left: (identifier)
          right: (identifier))))))

================================================================================
FOR EACH with WHERE clause
================================================================================

FOR EACH customer WHERE customer.id = 1 NO-LOCK:
  DISPLAY customer.name.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)
        (where_clause
          (binary_expression
            (qualified_name
              left: (identifier)
              right: (identifier))
            (number_literal)))
        (no_lock)))
    (body
      (display_statement
        (qualified_name
          left: (identifier)
          right: (identifier))))))

================================================================================
FOR EACH with ON ERROR UNDO THROW
================================================================================

FOR EACH tFcMessages ON ERROR UNDO, THROW:
  DISPLAY tFcMessages.tcFcMessage.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)))
    (on_error_clause)
    (body
      (display_statement
        (qualified_name
          left: (identifier)
          right: (identifier))))))

================================================================================
FOR EACH with USE-INDEX and BREAK BY
================================================================================

FOR EACH trans_hist WHERE trans_hist.domain = "ZMD" NO-LOCK USE-INDEX idxTrans BREAK BY trans_hist.line BY trans_hist.part:
  DISPLAY trans_hist.line.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)
        (where_clause
          (binary_expression
            (qualified_name
              left: (identifier)
              right: (identifier))
            (string_literal)))
        (no_lock)
        (use_index
          index: (identifier))
        (break_by
          (qualified_name
            left: (identifier)
            right: (identifier))
          (qualified_name
            left: (identifier)
            right: (identifier)))))
    (body
      (display_statement
        (qualified_name
          left: (identifier)
          right: (identifier))))))

================================================================================
FOR EACH with BY clause and DESC
================================================================================

FOR EACH order_hdr NO-LOCK BY order_hdr.order_num DESC:
  DISPLAY order_hdr.order_num.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)
        (no_lock)
        (by_clause
          (qualified_name
            left: (identifier)
            right: (identifier)))))
    (body
      (display_statement
        (qualified_name
          left: (identifier)
          right: (identifier))))))

================================================================================
FOR EACH with frame clause
================================================================================

FOR EACH item NO-LOCK WITH FRAME fr WIDTH 120:
  PUT UNFORMATTED item.item_id SKIP.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)
        (no_lock)))
    (with_frame_clause
      name: (identifier)
      (number_literal))
    (body
      (put_statement
        value: (qualified_name
          left: (identifier)
          right: (identifier))
        (skip)))))

================================================================================
FOR EACH with label
================================================================================

outer_loop: FOR EACH item_mstr NO-LOCK:
  DISPLAY item_mstr.item_code.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    label: (identifier)
    (for_record_list
      (for_record
        table: (identifier)
        (no_lock)))
    (body
      (display_statement
        (qualified_name
          left: (identifier)
          right: (identifier))))))

================================================================================
FOR EACH with ON ENDKEY UNDO RETRY
================================================================================

FOR EACH Customer ON ENDKEY UNDO, RETRY:
  DISPLAY Customer.Name.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)))
    (on_endkey_clause
      (undo_phrase))
    (body
      (display_statement
        (qualified_name
          left: (identifier)
          right: (identifier))))))

================================================================================
FOR EACH with EXCLUSIVE-LOCK
================================================================================

FOR EACH ld_det WHERE ld_domain = "ZMD" EXCLUSIVE-LOCK:
  DISPLAY ld_det.ld_domain.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)
        (where_clause
          (binary_expression
            (identifier)
            (string_literal)))
        (exclusive_lock)))
    (body
      (display_statement
        (qualified_name
          left: (identifier)
          right: (identifier))))))

================================================================================
FOR EACH with SHARE-LOCK and NO-PREFETCH
================================================================================

FOR EACH share_lock_rec SHARE-LOCK NO-PREFETCH:
  DISPLAY share_lock_rec.share_id.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)
        (share_lock)
        (no_prefetch)))
    (body
      (display_statement
        (qualified_name
          left: (identifier)
          right: (identifier))))))

================================================================================
FOR FIRST
================================================================================

FOR FIRST Customer NO-LOCK:
  DISPLAY Customer.Name.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)
        (no_lock)))
    (body
      (display_statement
        (qualified_name
          left: (identifier)
          right: (identifier))))))

================================================================================
FOR LAST
================================================================================

FOR LAST Order NO-LOCK:
  DISPLAY Order.OrderNum.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)
        (no_lock)))
    (body
      (display_statement
        (qualified_name
          left: (identifier)
          right: (identifier))))))

================================================================================
FOR EACH with multiple tables (join)
================================================================================

FOR EACH Customer NO-LOCK, EACH Order OF Customer NO-LOCK:
  DISPLAY Customer.Name Order.OrderNum.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)
        (no_lock))
      (for_record
        table: (identifier)
        (of_clause
          (identifier))
        (no_lock)))
    (body
      (display_statement
        (qualified_name
          left: (identifier)
          right: (identifier))
        (qualified_name
          left: (identifier)
          right: (identifier))))))

================================================================================
FOR EACH with complex WHERE and multiple BY
================================================================================

FOR EACH Customer NO-LOCK WHERE Customer.Balance > 0 AND Customer.State = "NY" BY Customer.Name BY Customer.Balance DESC:
  DISPLAY Customer.Name Customer.Balance.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)
        (no_lock)
        (where_clause
          (binary_expression
            (binary_expression
              (qualified_name
                left: (identifier)
                right: (identifier))
              (number_literal))
            (binary_expression
              (qualified_name
                left: (identifier)
                right: (identifier))
              (string_literal))))
        (by_clause
          (qualified_name
            left: (identifier)
            right: (identifier))
          (qualified_name
            left: (identifier)
            right: (identifier)))))
    (body
      (display_statement
        (qualified_name
          left: (identifier)
          right: (identifier))
        (qualified_name
          left: (identifier)
          right: (identifier))))))

================================================================================
FOR EACH FIRST/LAST in join
================================================================================

FOR EACH Customer NO-LOCK, FIRST Order OF Customer NO-LOCK:
  DISPLAY Customer.Name Order.OrderNum.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)
        (no_lock))
      (for_record
        table: (identifier)
        (of_clause
          (identifier))
        (no_lock)))
    (body
      (display_statement
        (qualified_name
          left: (identifier)
          right: (identifier))
        (qualified_name
          left: (identifier)
          right: (identifier))))))

================================================================================
FOR variable loops
================================================================================

FOR i = 1 TO 10:
  DISPLAY i.
END.

FOR i = 1 TO 100 BY 5:
  DISPLAY i.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    (for_variable_loop
      variable: (identifier)
      start: (number_literal)
      end: (number_literal))
    (body
      (display_statement
        (identifier))))
  (for_each_statement
    (for_variable_loop
      variable: (identifier)
      start: (number_literal)
      end: (number_literal)
      step: (number_literal))
    (body
      (display_statement
        (identifier)))))

================================================================================
FOR WHILE and STOP-AFTER
================================================================================

FOR EACH Customer WHILE x > 5:
  DISPLAY Customer.
END.

FOR EACH Customer STOP-AFTER 30:
  DISPLAY Customer.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)))
    (while_clause
      condition: (binary_expression
        (identifier)
        (number_literal)))
    (body
      (display_statement
        (identifier))))
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)))
    (stop_after_clause
      time: (number_literal))
    (body
      (display_statement
        (identifier)))))

================================================================================
FOR error handlers
================================================================================

FOR EACH Customer ON ERROR UNDO, LEAVE:
  DISPLAY Customer.
END.

FOR EACH Customer ON QUIT UNDO, LEAVE:
  DISPLAY Customer.
END.

FOR EACH Customer ON STOP UNDO, LEAVE:
  DISPLAY Customer.
END.

--------------------------------------------------------------------------------

(source_code
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)))
    (on_error_clause)
    (body
      (display_statement
        (identifier))))
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)))
    (on_quit_clause)
    (body
      (display_statement
        (identifier))))
  (for_each_statement
    (for_record_list
      (for_record
        table: (identifier)))
    (on_stop_clause)
    (body
      (display_statement
        (identifier)))))
