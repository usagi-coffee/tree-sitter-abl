================================================================================
QUERY DEFINITION - Basic Syntax
================================================================================

DEFINE QUERY qMain FOR Customer.
DEF QUERY qOrder FOR Sales.Order.
DEFINE QUERY qTemp FOR ttData.

--------------------------------------------------------------------------------

(source_code
  (query_definition
    name: (identifier)
    (query_table_list
      table: (identifier)))
  (query_definition
    name: (identifier)
    (query_table_list
      table: (qualified_name
        left: (identifier)
        right: (identifier))))
  (query_definition
    name: (identifier)
    (query_table_list
      table: (identifier))))

================================================================================
QUERY DEFINITION - Multiple Tables
================================================================================

DEFINE QUERY qMulti FOR Customer, Order, OrderLine.
DEF QUERY q2 FOR ttHeader, ttLine.

--------------------------------------------------------------------------------

(source_code
  (query_definition
    name: (identifier)
    (query_table_list
      table: (identifier)
      table: (identifier)
      table: (identifier)))
  (query_definition
    name: (identifier)
    (query_table_list
      table: (identifier)
      table: (identifier))))

================================================================================
QUERY DEFINITION - FIELD Lists with FIELDS
================================================================================

DEFINE QUERY qFields FOR Customer FIELDS (CustNum, Name, City).
DEF QUERY qOrder FOR Sales.Order FIELDS (OrderNum, CustNum, OrderDate).

--------------------------------------------------------------------------------

(source_code
  (query_definition
    name: (identifier)
    (query_table_list
      table: (identifier)
      (field_list
        (identifier)
        (identifier)
        (identifier))))
  (query_definition
    name: (identifier)
    (query_table_list
      table: (qualified_name
        left: (identifier)
        right: (identifier))
      (field_list
        (identifier)
        (identifier)
        (identifier)))))

================================================================================
QUERY DEFINITION - FIELD Lists with EXCEPT
================================================================================

DEFINE QUERY qExcept FOR Customer EXCEPT (Notes, Comments).
DEF QUERY qOrder FOR Sales.Order EXCEPT (Status, Flag).

--------------------------------------------------------------------------------

(source_code
  (query_definition
    name: (identifier)
    (query_table_list
      table: (identifier)
      (field_list
        (identifier)
        (identifier))))
  (query_definition
    name: (identifier)
    (query_table_list
      table: (qualified_name
        left: (identifier)
        right: (identifier))
      (field_list
        (identifier)
        (identifier)))))

================================================================================
QUERY DEFINITION - Mix of FIELDS and EXCEPT
================================================================================

DEFINE QUERY qMixed1 FOR Customer FIELDS (CustNum, Name), Order EXCEPT (Note).
DEF QUERY qMixed2 FOR ttHeader FIELDS (ID), ttLine EXCEPT (Skip), ttDetail FIELDS (Code).

--------------------------------------------------------------------------------

(source_code
  (query_definition
    name: (identifier)
    (query_table_list
      table: (identifier)
      (field_list
        (identifier)
        (identifier))
      table: (identifier)
      (field_list
        (identifier))))
  (query_definition
    name: (identifier)
    (query_table_list
      table: (identifier)
      (field_list
        (identifier))
      table: (identifier)
      (field_list
        (identifier))
      table: (identifier)
      (field_list
        (identifier)))))

================================================================================
QUERY DEFINITION - CACHE Option
================================================================================

DEFINE QUERY qCache FOR Customer CACHE 100.
DEF QUERY qCache2 FOR Sales.Order CACHE 50.

--------------------------------------------------------------------------------

(source_code
  (query_definition
    name: (identifier)
    (query_table_list
      table: (identifier))
    cache: (number_literal))
  (query_definition
    name: (identifier)
    (query_table_list
      table: (qualified_name
        left: (identifier)
        right: (identifier)))
    cache: (number_literal)))

================================================================================
QUERY DEFINITION - SCROLLING Option
================================================================================

DEFINE QUERY qScroll FOR Customer SCROLLING.
DEF QUERY qScroll2 FOR Sales.Order SCROLLING.

--------------------------------------------------------------------------------

(source_code
  (query_definition
    name: (identifier)
    (query_table_list
      table: (identifier)))
  (query_definition
    name: (identifier)
    (query_table_list
      table: (qualified_name
        left: (identifier)
        right: (identifier)))))

================================================================================
QUERY DEFINITION - RCODE-INFORMATION Option
================================================================================

DEFINE QUERY qRcode FOR Customer RCODE-INFORMATION.
DEF QUERY qRcode2 FOR Sales.Order SCROLLING RCODE-INFORMATION.

--------------------------------------------------------------------------------

(source_code
  (query_definition
    name: (identifier)
    (query_table_list
      table: (identifier)))
  (query_definition
    name: (identifier)
    (query_table_list
      table: (qualified_name
        left: (identifier)
        right: (identifier)))))

================================================================================
QUERY DEFINITION - All Options Combined
================================================================================

DEFINE QUERY qFull FOR Customer FIELDS (CustNum, Name)
  CACHE 100
  SCROLLING
  RCODE-INFORMATION.

--------------------------------------------------------------------------------

(source_code
  (query_definition
    name: (identifier)
    (query_table_list
      table: (identifier)
      (field_list
        (identifier)
        (identifier)))
    cache: (number_literal)))

================================================================================
QUERY DEFINITION - Shared Scopes
================================================================================

DEFINE NEW SHARED QUERY qShared FOR Customer.
DEFINE SHARED QUERY qUse FOR Order.
DEF NEW SHARED QUERY qTemp FOR ttData.

--------------------------------------------------------------------------------

(source_code
  (query_definition
    (shared_variable_scope)
    name: (identifier)
    (query_table_list
      table: (identifier)))
  (query_definition
    (shared_variable_scope)
    name: (identifier)
    (query_table_list
      table: (identifier)))
  (query_definition
    (shared_variable_scope)
    name: (identifier)
    (query_table_list
      table: (identifier))))

================================================================================
QUERY DEFINITION - Access Modifiers
================================================================================

DEFINE PRIVATE QUERY qPriv FOR Customer.
DEFINE PROTECTED QUERY qProt FOR Sales.Order.
DEF PRIVATE QUERY qTemp FOR ttData.

--------------------------------------------------------------------------------

(source_code
  (query_definition
    (access_modifier)
    name: (identifier)
    (query_table_list
      table: (identifier)))
  (query_definition
    (access_modifier)
    name: (identifier)
    (query_table_list
      table: (qualified_name
        left: (identifier)
        right: (identifier))))
  (query_definition
    (access_modifier)
    name: (identifier)
    (query_table_list
      table: (identifier))))

================================================================================
QUERY DEFINITION - STATIC Modifier
================================================================================

DEFINE STATIC QUERY qStatic FOR Customer.
DEF PROTECTED STATIC QUERY qProtStatic FOR Sales.Order.
DEFINE PRIVATE STATIC QUERY qPrivStatic FOR ttData.

--------------------------------------------------------------------------------

(source_code
  (query_definition
    (static_modifier)
    name: (identifier)
    (query_table_list
      table: (identifier)))
  (query_definition
    (access_modifier)
    (static_modifier)
    name: (identifier)
    (query_table_list
      table: (qualified_name
        left: (identifier)
        right: (identifier))))
  (query_definition
    (access_modifier)
    (static_modifier)
    name: (identifier)
    (query_table_list
      table: (identifier))))

================================================================================
QUERY DEFINITION - Qualified Table Names
================================================================================

DEFINE QUERY qQual FOR Sales.Customer.
DEFINE QUERY qFull FOR Database.Schema.Table.
DEF QUERY q2 FOR MyProc.TempTable.

--------------------------------------------------------------------------------

(source_code
  (query_definition
    name: (identifier)
    (query_table_list
      table: (qualified_name
        left: (identifier)
        right: (identifier))))
  (query_definition
    name: (identifier)
    (query_table_list
      table: (qualified_name
        left: (identifier)
        right: (identifier)
        right: (identifier))))
  (query_definition
    name: (identifier)
    (query_table_list
      table: (qualified_name
        left: (identifier)
        right: (identifier)))))

================================================================================
QUERY DEFINITION - Single Field
================================================================================

DEFINE QUERY qSingle FOR Customer FIELDS (CustNum).
DEF QUERY qOne FOR Sales.Order EXCEPT (hidden).

--------------------------------------------------------------------------------

(source_code
  (query_definition
    name: (identifier)
    (query_table_list
      table: (identifier)
      (field_list
        (identifier))))
  (query_definition
    name: (identifier)
    (query_table_list
      table: (qualified_name
        left: (identifier)
        right: (identifier))
      (field_list
        (identifier)))))

================================================================================
QUERY DEFINITION - Complex Multi-Table Combinations
================================================================================

DEFINE QUERY qComplex FOR Customer FIELDS (CustNum, Name)
  , Order FIELDS (OrderNum, CustNum)
  , OrderLine FIELDS (LineNum, ItemNum)
  CACHE 200
  SCROLLING
  RCODE-INFORMATION.

--------------------------------------------------------------------------------

(source_code
  (query_definition
    name: (identifier)
    (query_table_list
      table: (identifier)
      (field_list
        (identifier)
        (identifier))
      table: (identifier)
      (field_list
        (identifier)
        (identifier))
      table: (identifier)
      (field_list
        (identifier)
        (identifier)))
    cache: (number_literal)))

================================================================================
QUERY DEFINITION - reference snippets
================================================================================

DEFINE QUERY q-salesrep FOR SalesRep.
DEFINE QUERY q-cust FOR Customer.
DEFINE BROWSE cust-brws QUERY q-cust
DISPLAY Customer.CustNum Customer.Name Customer.Phone
WITH 5 DOWN TITLE "Customer Information".
DEFINE BUTTON b_next LABEL "Next".
DEFINE BUTTON b_quit LABEL "Quit" AUTO-ENDKEY.
FORM
SalesRep.SalesRep SalesRep.RepName SalesRep.Region SalesRep.MonthQuota
WITH FRAME rep-info SIDE-LABELS TITLE "Sales Rep. Info".
FORM b_next space(5) b_quit
WITH FRAME butt-frame COLUMN 60.
ON CHOOSE OF b_next DO:
GET NEXT q-salesrep.
IF NOT AVAILABLE SalesRep THEN GET FIRST q-salesrep.
RUN disp-rep.
END.
OPEN QUERY q-salesrep FOR EACH SalesRep NO-LOCK.
GET FIRST q-salesrep.
RUN disp-rep.
ENABLE cust-brws WITH FRAME cust-info.
ENABLE ALL WITH FRAME butt-frame.
WAIT-FOR WINDOW-CLOSE OF CURRENT-WINDOW.
PROCEDURE disp-rep:
DISPLAY SalesRep.SalesRep Salesrep.RepName SalesRep.Region
SalesRep.MonthQuota
WITH FRAME rep-info CENTERED SIDE-LABELS TITLE "Sales Rep. Info".
OPEN QUERY q-cust FOR EACH Customer OF SalesRep NO-LOCK.
END PROCEDURE.

DEFINE VARIABLE h AS HANDLE NO-UNDO.
DEFINE QUERY q FOR Customer RCODE-INFORMATION.
h = QUERY q:HANDLE.
OPEN QUERY q FOR EACH Customer BY Customer.Name.
MESSAGE h:INDEX-INFORMATION.

DEFINE QUERY qEmpty FOR Customer FIELDS ().
DEFINE QUERY qExceptAll FOR Customer EXCEPT ().

--------------------------------------------------------------------------------

(source_code
  (query_definition
    name: (identifier)
    (query_table_list
      table: (identifier)))
  (query_definition
    name: (identifier)
    (query_table_list
      table: (identifier)))
  (browse_definition
    name: (identifier)
    query: (identifier)
    column: (qualified_name
      left: (identifier)
      right: (identifier))
    column: (qualified_name
      left: (identifier)
      right: (identifier))
    column: (qualified_name
      left: (identifier)
      right: (identifier))
    (down_option
      (number_literal))
    (title_option
      (string_literal)))
  (button_definition
    name: (identifier)
    (button_option
      label: (string_literal)))
  (button_definition
    name: (identifier)
    (button_option
      label: (string_literal))
    (button_option))
  (form_statement
    (form_item
      field: (qualified_name
        left: (identifier)
        right: (identifier)))
    (form_item
      field: (qualified_name
        left: (identifier)
        right: (identifier)))
    (form_item
      field: (qualified_name
        left: (identifier)
        right: (identifier)))
    (form_item
      field: (qualified_name
        left: (identifier)
        right: (identifier)))
    (frame_phrase
      frame: (identifier)
      (frame_option)
      (frame_option
        title: (string_literal))))
  (form_statement
    (form_item
      field: (identifier))
    (form_item
      (number_literal))
    (form_item
      field: (identifier))
    (frame_phrase
      frame: (identifier)
      (frame_option
        column: (number_literal))))
  (on_statement
    event: (identifier)
    widget: (identifier)
    (do_block
      (body
        (get_statement
          query: (identifier))
        (if_statement
          (unary_expression
            (available_expression
              record: (identifier)))
          then: (get_statement
            query: (identifier)))
        (run_statement
          procedure: (identifier)))))
  (open_query_statement
    query: (identifier)
    (record_phrase
      record: (identifier)))
  (get_statement
    query: (identifier))
  (run_statement
    procedure: (identifier))
  (enable_statement
    (enable_item
      field: (identifier))
    (frame_phrase
      frame: (identifier)))
  (enable_statement
    (frame_phrase
      frame: (identifier)))
  (wait_for_statement
    events: (identifier)
    widgets: (identifier))
  (procedure_definition
    name: (identifier)
    (display_statement
      (qualified_name
        left: (identifier)
        right: (identifier))
      (qualified_name
        left: (identifier)
        right: (identifier))
      (qualified_name
        left: (identifier)
        right: (identifier))
      (qualified_name
        left: (identifier)
        right: (identifier))
      (frame_phrase
        frame: (identifier)
        (frame_option)
        (frame_option)
        (frame_option
          title: (string_literal))))
    (open_query_statement
      query: (identifier)
      (record_phrase
        record: (identifier)
        of: (identifier))))
  (variable_definition
    name: (identifier)
    type: (identifier)
    (no_undo))
  (query_definition
    name: (identifier)
    (query_table_list
      table: (identifier)))
  (assignment_statement
    left: (identifier)
    operator: (assignment_operator)
    right: (object_access
      left: (identifier)
      (identifier))
    right: (identifier)))(open_query_statement
  query: (identifier)
  (record_phrase
    record: (identifier))
  (by_phrase
    by: (qualified_name
      left: (identifier)
      right: (identifier))))(message_statement
  (object_access
    left: (identifier)
    right: (identifier)))(query_definition
  name: (identifier)
  (query_table_list
    table: (identifier)
    (field_list
      (identifier))))(query_definition
  name: (identifier)
  (query_table_list
    table: (identifier)
    (field_list
      (identifier))))
