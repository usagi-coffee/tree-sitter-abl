================================================================================
RUN basic procedure
================================================================================

RUN myproc.p.
RUN someproc.p.
RUN utilities/helper.p.

--------------------------------------------------------------------------------

(source_code
  (run_statement
    procedure: (procedure_name))
  (run_statement
    procedure: (procedure_name))
  (run_statement
    procedure: (procedure_name)))

================================================================================
RUN with arguments OUTPUT DATASET
================================================================================

RUN proxy/starttransaction.p (OUTPUT DATASET tFcMessages, OUTPUT bFinApiError).

--------------------------------------------------------------------------------

(source_code
  (run_statement
    procedure: (procedure_name)
    (arguments
      (argument
        value: (dataset_reference
          dataset: (identifier)))
      (argument
        value: (identifier)))))

================================================================================
RUN with INPUT-OUTPUT DATASET
================================================================================

RUN someproc.p (INPUT-OUTPUT DATASET dsOrder, INPUT DATASET dsOther:HANDLE).

--------------------------------------------------------------------------------

(source_code
  (run_statement
    procedure: (procedure_name)
    (arguments
      (argument
        value: (dataset_reference
          dataset: (identifier)))
      (argument
        value: (dataset_reference
          dataset: (object_access
            left: (identifier)
            right: (identifier)))))))

================================================================================
RUN with simple arguments
================================================================================

RUN calculate.p (INPUT x, INPUT y, OUTPUT result).
RUN process.p (1, "hello", TRUE).

--------------------------------------------------------------------------------

(source_code
  (run_statement
    procedure: (procedure_name)
    (arguments
      (argument
        value: (identifier))
      (argument
        value: (identifier))
      (argument
        value: (identifier))))
  (run_statement
    procedure: (procedure_name)
    (arguments
      (argument
        value: (number_literal))
      (argument
        value: (string_literal))
      (argument
        value: (boolean_literal)))))

================================================================================
RUN internal procedure
================================================================================

RUN processData.
RUN validate-input.
RUN ip_calculate.

--------------------------------------------------------------------------------

(source_code
  (run_statement
    procedure: (identifier))
  (run_statement
    procedure: (identifier))
  (run_statement
    procedure: (identifier)))

================================================================================
RUN internal procedure with arguments
================================================================================

RUN processData (INPUT cValue, OUTPUT lResult).
RUN validateOrder (orderId, customerId).

--------------------------------------------------------------------------------

(source_code
  (run_statement
    procedure: (identifier)
    (arguments
      (argument
        value: (identifier))
      (argument
        value: (identifier))))
  (run_statement
    procedure: (identifier)
    (arguments
      (argument
        value: (identifier))
      (argument
        value: (identifier)))))

================================================================================
RUN with object method call
================================================================================

RUN utils.helpers.

--------------------------------------------------------------------------------

(source_code
  (run_statement
    procedure: (qualified_name
      left: (identifier)
      right: (identifier))))

================================================================================
RUN with path variations
================================================================================

RUN data/import/customers.p.
RUN ../shared/utilities.p.
RUN ./local/process.p.

--------------------------------------------------------------------------------

(source_code
  (run_statement
    procedure: (procedure_name))
  (run_statement
    procedure: (procedure_name))
  (run_statement
    procedure: (procedure_name)))

================================================================================
RUN with multiple arguments
================================================================================

RUN processRecord.p (cCustomer, lSuccess).

--------------------------------------------------------------------------------

(source_code
  (run_statement
    procedure: (procedure_name)
    (arguments
      (argument
        value: (identifier))
      (argument
        value: (identifier)))))

================================================================================
RUN with expression arguments
================================================================================

RUN calc.p (x + y, STRING(TODAY), SUBSTRING(name, 1, 10)).

--------------------------------------------------------------------------------

(source_code
  (run_statement
    procedure: (procedure_name)
    (arguments
      (argument
        value: (binary_expression
          (identifier)
          (identifier)))
      (argument
        value: (function_call
          function: (identifier)
          (arguments
            (argument
              value: (identifier)))))
      (argument
        value: (function_call
          function: (identifier)
          (arguments
            (argument
              value: (identifier))
            (argument
              value: (number_literal))
            (argument
              value: (number_literal))))))))

================================================================================
RUN - reference snippets and async/server options
================================================================================

DEFINE INPUT PARAMETER invDate AS DATE NO-UNDO.
DEFINE VARIABLE sh AS HANDLE NO-UNDO.
DEFINE VARIABLE ah AS HANDLE NO-UNDO.
CREATE SERVER sh.
sh:CONNECT("-URL http://slater:8810/inventory/apsv -sessionModel Session-free").
RUN runReport.p ON SERVER sh
ASYNCHRONOUS SET ah EVENT-HANDLER "reportDone" EVENT-HANDLER-CONTEXT THIS-PROCEDURE
(invDate, OUTPUT numLines AS INTEGER).
RETURN.
PROCEDURE reportDone:
DEFINE INPUT PARAMETER numLines AS INTEGER.
IF ah:ERROR OR ah:STOP THEN
MESSAGE "An error occurred when running your" SKIP
"Inventory report for" invDate "." SKIP
"The error is:" ERROR-STATUS:GET-MESSAGE(1)
VIEW-AS ALERT-BOX.
ELSE
MESSAGE "Your Inventory report for " invDate SKIP
"has completed successfully." SKIP
numLines "report lines were generated"
VIEW-AS ALERT-BOX.
sh:DISCONNECT().
DELETE OBJECT sh.
DELETE OBJECT THIS-PROCEDURE.
END PROCEDURE.

RUN aproc.p SINGLE-RUN SET procHandle ON SERVER serverHandle.
RUN internalProcA IN procHandle (INPUT argIn1, OUTPUT argout1).
DELETE PROCEDURE procHandle.

RUN aproc.p SINGLETON SET procHandle ON SERVER serverHandle.
RUN internalProcA IN procHandle (INPUT argIn1, OUTPUT argout1).
RUN internalProcB IN procHandle (INPUT argIn1, OUTPUT argout1).
DELETE PROCEDURE procHandle.

RUN /usr/foo/app.pl<<appmenu.r>>.
RUN VALUE(cProcName) PERSISTENT SET hProc.
RUN internalProc IN hProc ASYNCHRONOUS EVENT-PROCEDURE "done" IN THIS-PROCEDURE.
RUN methodProc IN hProc NO-ERROR.

--------------------------------------------------------------------------------

(source_code
  (parameter_definition
    name: (identifier)
    type: (identifier)
    (no_undo))
  (variable_definition
    name: (identifier)
    type: (identifier)
    (no_undo))
  (variable_definition
    name: (identifier)
    type: (identifier)
    (no_undo))
  (create_statement
    server: (identifier))
  (expression_statement
    (function_call
      function: (object_access
        left: (identifier)
        right: (identifier))
      (arguments
        (argument
          value: (string_literal)))))
  (run_statement
    procedure: (procedure_name)
    (on_server_phrase
      server: (identifier))
    (asynchronous_phrase
      handle: (identifier)
      event_handler: (string_literal)
      context: (this_procedure))
    (arguments
      (argument
        value: (identifier))
      (argument
        name: (identifier)
        type: (identifier))))
  (return_statement)
  (procedure_definition
    name: (identifier)
    (parameter_definition
      name: (identifier)
      type: (identifier))
    (if_statement
      (binary_expression
        (object_access
          left: (identifier)
          right: (identifier))
        (object_access
          left: (identifier)
          right: (identifier)))
      then: (message_statement
        (string_literal)
        (skip)
        (string_literal)
        (identifier)
        (string_literal)
        (skip)
        (string_literal)
        (function_call
          function: (object_access
            left: (identifier)
            right: (identifier))
          (arguments
            (argument
              value: (number_literal))))
        (view_as_phrase))
      else: (message_statement
        (string_literal)
        (identifier)
        (skip)
        (string_literal)
        (skip)
        (identifier)
        (string_literal)
        (view_as_phrase)))
    (expression_statement
      (function_call
        function: (object_access
          left: (identifier)
          right: (identifier))
        (arguments)))
    (delete_object_statement
      name: (identifier))
    (delete_object_statement
      name: (identifier)))
  (run_statement
    procedure: (procedure_name)
    (single_run_option
      handle: (identifier))
    (on_server_phrase
      server: (identifier)))
  (run_statement
    procedure: (identifier)
    (in_phrase
      context: (function_call
        function: (identifier)
        (arguments
          (argument
            value: (identifier))
          (argument
            value: (identifier))))))
  (delete_procedure_statement
    handle: (identifier))
  (run_statement
    procedure: (procedure_name)
    (singleton_option
      handle: (identifier))
    (on_server_phrase
      server: (identifier)))
  (run_statement
    procedure: (identifier)
    (in_phrase
      context: (function_call
        function: (identifier)
        (arguments
          (argument
            value: (identifier))
          (argument
            value: (identifier))))))
  (run_statement
    procedure: (identifier)
    (in_phrase
      context: (function_call
        function: (identifier)
        (arguments
          (argument
            value: (identifier))
          (argument
            value: (identifier))))))
  (delete_procedure_statement
    handle: (identifier))
  (run_statement
    procedure: (library_member
      library: (procedure_name)))
  (run_statement
    procedure: (value_expression
      (identifier))
    (persistent_option
      handle: (identifier)))
  (run_statement
    procedure: (identifier)
    (in_phrase
      context: (identifier))
    (asynchronous_phrase
      event_procedure: (string_literal)
      context: (this_procedure)))
  (run_statement
    procedure: (identifier)
    (in_phrase
      context: (identifier))))
