================================================================================
WORK-TABLE BASIC DEFINITION
================================================================================

DEFINE WORK-TABLE wtCustomer NO-UNDO
  FIELD custNum AS INTEGER
  FIELD custName AS CHARACTER.

--------------------------------------------------------------------------------

(source_code
  (work_table_definition
    name: (identifier)
    (no_undo)
    (field
      name: (identifier)
      type: (identifier))
    (field
      name: (identifier)
      type: (identifier))))

================================================================================
WORK-TABLE DEFINITION - LIKE Phrase
================================================================================

DEFINE WORK-TABLE wtLike LIKE Customer.
DEFINE WORK-TABLE wtOrder LIKE Sales.Order NO-UNDO.

--------------------------------------------------------------------------------

(source_code
  (work_table_definition
    name: (identifier)
    (like_phrase
      like: (identifier)))
  (work_table_definition
    name: (identifier)
    (like_phrase
      like: (qualified_name
        left: (identifier)
        right: (identifier)))
    (no_undo)))

================================================================================
WORK-TABLE DEFINITION - Qualified LIKE
================================================================================

DEFINE WORK-TABLE wtQual LIKE Sales.Order NO-UNDO.
DEF WORK-TABLE wtFull LIKE Database.Schema.Table.

--------------------------------------------------------------------------------

(source_code
  (work_table_definition
    name: (identifier)
    (like_phrase
      like: (qualified_name
        left: (identifier)
        right: (identifier)))
    (no_undo))
  (work_table_definition
    name: (identifier)
    (like_phrase
      like: (qualified_name
        left: (identifier)
        right: (identifier)
        right: (identifier)))))

================================================================================
WORK-TABLE DEFINITION - Field Options
================================================================================

DEFINE WORK-TABLE wtOpt NO-UNDO
  FIELD code AS CHARACTER FORMAT "x(10)" LABEL "Code"
  FIELD value AS DECIMAL DECIMALS 2 INITIAL 0.

--------------------------------------------------------------------------------

(source_code
  (work_table_definition
    name: (identifier)
    (no_undo)
    (field
      name: (identifier)
      type: (identifier)
      (field_option
        (string_literal))
      (field_option
        (string_literal)))
    (field
      name: (identifier)
      type: (identifier)
      (field_option
        (number_literal))
      (field_option
        (number_literal)))))

================================================================================
WORK-TABLE DEFINITION - WITH Index
================================================================================

DEFINE WORK-TABLE wtIdx NO-UNDO
  FIELD id AS INTEGER
  FIELD name AS CHARACTER
  INDEX idx AS PRIMARY id.

--------------------------------------------------------------------------------

(source_code
  (work_table_definition
    name: (identifier)
    (no_undo)
    (field
      name: (identifier)
      type: (identifier))
    (field
      name: (identifier)
      type: (identifier))
    (index
      name: (identifier)
      field: (identifier))))

================================================================================
WORK-TABLE DEFINITION - Minimal
================================================================================

DEFINE WORK-TABLE w FIELD f AS INTEGER.
DEF WORK-TABLE wt FIELD x AS CHARACTER.

--------------------------------------------------------------------------------

(source_code
  (work_table_definition
    name: (identifier)
    (field
      name: (identifier)
      type: (identifier)))
  (work_table_definition
    name: (identifier)
    (field
      name: (identifier)
      type: (identifier))))

================================================================================
WORK-TABLE DEFINITION - LIKE with Index
================================================================================

DEFINE WORK-TABLE wtCustomer LIKE Customer NO-UNDO
  INDEX custIdx AS PRIMARY custNum.

--------------------------------------------------------------------------------

(source_code
  (work_table_definition
    name: (identifier)
    (like_phrase
      like: (identifier))
    (no_undo)
    (index
      name: (identifier)
      field: (identifier))))

================================================================================
WORK-TABLE - reference snippet
================================================================================

DEFINE WORK-TABLE showsales
FIELD region LIKE SaleRrep.Region LABEL "Region"
FIELD state LIKE Customer.State LABEL "St"
FIELD tot-sales LIKE Customer.Balance COLUMN-LABEL "Total!Sales".
FOR EACH Customer, SalesRep OF Customer BREAK BY Customer.State:
ACCUMULATE Customer.Balance (TOTAL BY Customer.State).
IF LAST-OF(Customer.State) THEN DO:
CREATE showsales.
showsales.state = Customer.State.
showsales.tot-sales = ACCUM TOTAL BY Customer.State Customer.Balance.
showsales.region = SalesRep.Region.
END.
END.
FOR EACH showsales BREAK BY showsales.region BY showsales.state:
IF FIRST-OF(showsales.region) THEN
DISPLAY showsales.region.
DISPLAY showsales.state tot-sales (TOTAL BY showsales.region).
END.

DEFINE NEW SHARED WORK-TABLE wtShared FIELD f1 AS INTEGER.
DEFINE SHARED WORK-TABLE wtShared FIELD f1 AS INTEGER.
DEFINE PRIVATE WORK-TABLE wtPrivate FIELD f1 AS INTEGER.

--------------------------------------------------------------------------------

(source_code
  (work_table_definition
    (identifier)
    (field
      (identifier)
      (qualified_name
        (identifier)
        (identifier))
      (field_option
        (string_literal)))
    (field
      (identifier)
      (qualified_name
        (identifier)
        (identifier))
      (field_option
        (string_literal)))
    (field
      (identifier)
      (qualified_name
        (identifier)
        (identifier))
      (field_option
        (string_literal))))
  (for_each_statement
    (record
      (identifier))
    (record
      (identifier)
      (of_phrase
        (identifier))
      (break_by
        (qualified_name
          (identifier)
          (identifier))))
    (body
      (accumulate_statement
        (accumulate
          (qualified_name
            (identifier)
            (identifier))
          (aggregate_phrase
            (aggregate_operation)
            (by_phrase
              (qualified_name
                (identifier)
                (identifier))))))
      (if_statement
        (function_call
          (identifier)
          (arguments
            (argument
              (qualified_name
                (identifier)
                (identifier)))))
        (do_block
          (body
            (create_statement
              (identifier))
            (assignment_statement
              (qualified_name
                (identifier)
                (identifier))
              (assignment_operator)
              (qualified_name
                (identifier)
                (identifier)))
            (assignment_statement
              (qualified_name
                (identifier)
                (identifier))
              (assignment_operator)
              (accum_expression
                (aggregate_phrase
                  (aggregate_operation)
                  (by_phrase
                    (qualified_name
                      (identifier)
                      (identifier))))
                (qualified_name
                  (identifier)
                  (identifier))))
            (assignment_statement
              (qualified_name
                (identifier)
                (identifier))
              (assignment_operator)
              (qualified_name
                (identifier)
                (identifier))))))))
  (for_each_statement
    (record
      (identifier)
      (break_by
        (qualified_name
          (identifier)
          (identifier))
        (qualified_name
          (identifier)
          (identifier))))
    (body
      (if_statement
        (function_call
          (identifier)
          (arguments
            (argument
              (qualified_name
                (identifier)
                (identifier)))))
        (display_statement
          (qualified_name
            (identifier)
            (identifier))))
      (display_statement
        (qualified_name
          (identifier)
          (identifier))
        (identifier)
        (aggregate_phrase
          (aggregate_operation)
          (by_phrase
            (qualified_name
              (identifier)
              (identifier)))))))
  (work_table_definition
    (shared_variable_scope)
    (identifier)
    (field
      (identifier)
      (identifier)))
  (work_table_definition
    (shared_variable_scope)
    (identifier)
    (field
      (identifier)
      (identifier)))
  (work_table_definition
    (access_modifier)
    (identifier)
    (field
      (identifier)
      (identifier))))
