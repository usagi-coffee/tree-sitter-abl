================================================================================
WORK-TABLE BASIC DEFINITION
================================================================================

DEFINE WORK-TABLE wtCustomer NO-UNDO
  FIELD custNum AS INTEGER
  FIELD custName AS CHARACTER.

--------------------------------------------------------------------------------

(source_code
  (work_table_definition
    name: (identifier)
    (no_undo)
    (field
      name: (identifier)
      type: (identifier))
    (field
      name: (identifier)
      type: (identifier))))

================================================================================
WORK-TABLE DEFINITION - LIKE Phrase
================================================================================

DEFINE WORK-TABLE wtLike LIKE Customer.
DEFINE WORK-TABLE wtOrder LIKE Sales.Order NO-UNDO.

--------------------------------------------------------------------------------

(source_code
  (work_table_definition
    name: (identifier)
    (like_phrase
      like: (identifier)))
  (work_table_definition
    name: (identifier)
    (like_phrase
      like: (qualified_name
        left: (identifier)
        right: (identifier)))
    (no_undo)))

================================================================================
WORK-TABLE DEFINITION - Qualified LIKE
================================================================================

DEFINE WORK-TABLE wtQual LIKE Sales.Order NO-UNDO.
DEF WORK-TABLE wtFull LIKE Database.Schema.Table.

--------------------------------------------------------------------------------

(source_code
  (work_table_definition
    name: (identifier)
    (like_phrase
      like: (qualified_name
        left: (identifier)
        right: (identifier)))
    (no_undo))
  (work_table_definition
    name: (identifier)
    (like_phrase
      like: (qualified_name
        left: (identifier)
        right: (identifier)
        right: (identifier)))))

================================================================================
WORK-TABLE DEFINITION - Field Options
================================================================================

DEFINE WORK-TABLE wtOpt NO-UNDO
  FIELD code AS CHARACTER FORMAT "x(10)" LABEL "Code"
  FIELD value AS DECIMAL DECIMALS 2 INITIAL 0.

--------------------------------------------------------------------------------

(source_code
  (work_table_definition
    name: (identifier)
    (no_undo)
    (field
      name: (identifier)
      type: (identifier)
      format: (string_literal)
      label: (string_literal))
    (field
      name: (identifier)
      type: (identifier)
      decimals: (number_literal)
      initial: (number_literal))))

================================================================================
WORK-TABLE DEFINITION - WITH Index
================================================================================

DEFINE WORK-TABLE wtIdx NO-UNDO
  FIELD id AS INTEGER
  FIELD name AS CHARACTER
  INDEX idx AS PRIMARY id.

--------------------------------------------------------------------------------

(source_code
  (work_table_definition
    name: (identifier)
    (no_undo)
    (field
      name: (identifier)
      type: (identifier))
    (field
      name: (identifier)
      type: (identifier))
    (index
      name: (identifier)
      (primary)
      field: (identifier))))

================================================================================
WORK-TABLE DEFINITION - Minimal
================================================================================

DEFINE WORK-TABLE w FIELD f AS INTEGER.
DEF WORK-TABLE wt FIELD x AS CHARACTER.

--------------------------------------------------------------------------------

(source_code
  (work_table_definition
    name: (identifier)
    (field
      name: (identifier)
      type: (identifier)))
  (work_table_definition
    name: (identifier)
    (field
      name: (identifier)
      type: (identifier))))

================================================================================
WORK-TABLE DEFINITION - EXTENT before LIKE
================================================================================

DEFINE WORK-TABLE wtExt FIELD tng_nabyw EXTENT 7 LIKE ad_name.

--------------------------------------------------------------------------------

(source_code
  (work_table_definition
    name: (identifier)
    (field
      name: (identifier)
      extent: (number_literal)
      type: (identifier))))

================================================================================
WORK-TABLE DEFINITION - LIKE with Index
================================================================================

DEFINE WORK-TABLE wtCustomer LIKE Customer NO-UNDO
  INDEX custIdx AS PRIMARY custNum.

--------------------------------------------------------------------------------

(source_code
  (work_table_definition
    name: (identifier)
    (like_phrase
      like: (identifier))
    (no_undo)
    (index
      name: (identifier)
      (primary)
      field: (identifier))))

================================================================================
WORK-TABLE - reference snippet
================================================================================

DEFINE WORK-TABLE showsales
FIELD region LIKE SaleRrep.Region LABEL "Region"
FIELD state LIKE Customer.State LABEL "St"
FIELD tot-sales LIKE Customer.Balance COLUMN-LABEL "Total!Sales".
FOR EACH Customer, SalesRep OF Customer BREAK BY Customer.State:
ACCUMULATE Customer.Balance (TOTAL BY Customer.State).
IF LAST-OF(Customer.State) THEN DO:
CREATE showsales.
showsales.state = Customer.State.
showsales.tot-sales = ACCUM TOTAL BY Customer.State Customer.Balance.
showsales.region = SalesRep.Region.
END.
END.
FOR EACH showsales BREAK BY showsales.region BY showsales.state:
IF FIRST-OF(showsales.region) THEN
  DISPLAY showsales.region.
  DISPLAY showsales.state tot-sales (TOTAL BY showsales.region).
END.

DEFINE NEW SHARED WORK-TABLE wtShared FIELD f1 AS INTEGER.
DEFINE SHARED WORK-TABLE wtShared FIELD f1 AS INTEGER.
DEFINE PRIVATE WORK-TABLE wtPrivate FIELD f1 AS INTEGER.

--------------------------------------------------------------------------------

(source_code
  (work_table_definition
    name: (identifier)
    (field
      name: (identifier)
      type: (qualified_name
        left: (identifier)
        right: (identifier))
      label: (string_literal))
    (field
      name: (identifier)
      type: (qualified_name
        left: (identifier)
        right: (identifier))
      label: (string_literal))
    (field
      name: (identifier)
      type: (qualified_name
        left: (identifier)
        right: (identifier))
      column_label: (string_literal)))
  (for_statement
    (record_phrase
      record: (identifier))
    (record_phrase
      record: (identifier)
      of: (identifier))
    (break_by
      by: (qualified_name
        left: (identifier)
        right: (identifier)))
    (body
      (accumulate_statement
        (accumulate
          target: (qualified_name
            left: (identifier)
            right: (identifier))
          (aggregate_phrase
            operation: (aggregate_operation)
            (by_phrase
              group: (qualified_name
                left: (identifier)
                right: (identifier))))))
      (if_statement
        (function_call
          function: (identifier)
          (arguments
            (argument
              name: (qualified_name
                left: (identifier)
                right: (identifier)))))
        then: (do_statement
          (body
            (create_statement
              table: (identifier))
            (assignment_statement
              left: (qualified_name
                left: (identifier)
                right: (identifier))
              operator: (assignment_operator)
              right: (qualified_name
                left: (identifier)
                right: (identifier)))
            (assignment_statement
              left: (qualified_name
                left: (identifier)
                right: (identifier))
              operator: (assignment_operator)
              right: (accum_expression
                operation: (aggregate_phrase
                  operation: (aggregate_operation)
                  (by_phrase
                    group: (qualified_name
                      left: (identifier)
                      right: (identifier))))
                field: (qualified_name
                  left: (identifier)
                  right: (identifier))))
            (assignment_statement
              left: (qualified_name
                left: (identifier)
                right: (identifier))
              operator: (assignment_operator)
              right: (qualified_name
                left: (identifier)
                right: (identifier))))))))
  (for_statement
    (record_phrase
      record: (identifier))
    (break_by
      by: (qualified_name
        left: (identifier)
        right: (identifier))
      by: (qualified_name
        left: (identifier)
        right: (identifier)))
    (body
      (if_statement
        (function_call
          function: (identifier)
          (arguments
            (argument
              name: (qualified_name
                left: (identifier)
                right: (identifier)))))
        then: (display_statement
          record: (qualified_name
            left: (identifier)
            right: (identifier))))
      (display_statement
        (field
          field: (qualified_name
            left: (identifier)
            right: (identifier)))
        (field
          field: (identifier)
          (aggregate_phrase
            operation: (aggregate_operation)
            (by_phrase
              group: (qualified_name
                left: (identifier)
                right: (identifier))))))))
  (work_table_definition
    (new_modifier)
    (scope_modifier)
    name: (identifier)
    (field
      name: (identifier)
      type: (identifier)))
  (work_table_definition
    (scope_modifier)
    name: (identifier)
    (field
      name: (identifier)
      type: (identifier)))
  (work_table_definition
    (access_modifier)
    name: (identifier)
    (field
      name: (identifier)
      type: (identifier))))
